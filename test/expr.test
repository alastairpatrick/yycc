BEGIN Variable
x
EXPECT_MESSAGE
:1:1: error 'x' undeclared
EXPECT_AST
0


BEGIN Condition expression
1 ? 2 : 3
EXPECT_AST
["?:", 1, 2, 3]


BEGIN Nested conditions
1 ? 2 ? 3 : 4 : 5 ? 6 : 7
EXPECT_AST
["?:", 1
       , ["?:", 2, 3, 4]
       , ["?:", 5, 6, 7]]


BEGIN Condition with logical OR
1 || 2 ? 3 || 4 : 5 ? 6 : 7
EXPECT_AST
["?:", ["||", 1, 2]
       , ["||", 3, 4]
       , ["?:", 5, 6, 7]]


BEGIN Logical OR expression
1 || 2
EXPECT_AST
["||", 1, 2]


BEGIN Logical OR left associative
1 || 2 || 3
EXPECT_AST
["||", ["||", 1, 2], 3]


BEGIN Logical AND expression
1 && 2
EXPECT_AST
["&&", 1, 2]


BEGIN Logical AND left associative
1 && 2 && 3
EXPECT_AST
["&&", ["&&", 1, 2], 3]


BEGIN Logical AND higher precedence than logical OR
1 || 2 && 3
EXPECT_AST
["||", 1, ["&&", 2, 3]]


BEGIN Add expression
1 + 2
EXPECT_AST
["+", 1, 2]


BEGIN Add left associative
1 + 2 + 3
EXPECT_AST
["+", ["+", 1, 2]
    , 3]


BEGIN Subtract expression
1 - 2
EXPECT_AST
["-", 1, 2]


BEGIN Subtract left associative
1 - 2 - 3
EXPECT_AST
["-", ["-", 1, 2]
    , 3]


BEGIN Multiply expression
1 * 2
EXPECT_AST
["*", 1, 2]


BEGIN Multiply left associative
1 * 2 * 3
EXPECT_AST
["*", ["*", 1, 2]
    , 3]


BEGIN Multiply > additive precedence
1 + 2 * 3
EXPECT_AST
["+", 1
    , ["*", 2, 3]]


BEGIN Divide expression
1 / 2
EXPECT_AST
["/", 1, 2]


BEGIN Divide left associative
1 / 2 / 3
EXPECT_AST
["/", ["/", 1, 2]
      , 3]


BEGIN Divide > additive precedence
1 + 2 / 3
EXPECT_AST
["+", 1
      , ["/", 2, 3]]


BEGIN Modulo expression
1 % 2
EXPECT_AST
["%", 1, 2]


BEGIN Modulo left associative
1 % 2 % 3
EXPECT_AST
["%", ["%", 1, 2]
      , 3]


BEGIN Modulo > additive precedence
1 + 2 % 3
EXPECT_AST
["+", 1
      , ["%", 2, 3]]


BEGIN Parentheses
1 + ( 2 + 3 )
EXPECT_AST
["+", 1
      , ["+", 2, 3]]


BEGIN Error on EOF mid expression
1 +
EXPECT_MESSAGE
:2:1: error unexpected end of file
EXPECT_AST
["+", 1, 0]
